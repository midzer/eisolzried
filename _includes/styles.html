{% assign rel = 'stylesheet' %}
{% if jekyll.environment == "production" and (page.url == "/" or page.url == "/by/" %}
<style>{% include minimalcss.txt %}</style>
{% assign rel = 'prefetch' %}
{% endif %}
<link id="main-link" rel="{{ rel }}" href="{{ '/assets/css/main.css' | prepend: site.baseurl }}">
{% assign rel = 'stylesheet' %}
{% if jekyll.environment == "production" and (page.url == "/" or page.url == "/by/" %}
<script>
var ua = typeof navigator !== 'undefined' ? navigator.userAgent || '' : ''
if(/safari|iphone|ipad|ipod|msie|trident/i.test(ua) && !/chrome|crios|crmo|firefox|iceweasel|fxios|edge/i.test(ua)) {
  document.getElementById('main-link').rel = 'stylesheet';
}
</script>
{% endif %}
<link id="theme-link" href="{{ '/assets/css/dark-theme.css' | prepend: site.baseurl }}">
<script>
try {
  if (window.localStorage.getItem('theme') === 'dark') {
    document.getElementById('theme-link').rel = 'stylesheet';
  }
} catch (e) {
  console.error('Error during localStorage access, possibly cookies are blocked:', e);
}
</script>
